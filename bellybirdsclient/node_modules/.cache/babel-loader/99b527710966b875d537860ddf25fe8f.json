{"ast":null,"code":"import _regeneratorRuntime from\"/Users/saikrishnareddymudhiganti/Desktop/MyProjects/projects/bellybird/bellybirdsclient/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/saikrishnareddymudhiganti/Desktop/MyProjects/projects/bellybird/bellybirdsclient/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/saikrishnareddymudhiganti/Desktop/MyProjects/projects/bellybird/bellybirdsclient/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import React,{useState}from\"react\";import Banner from\"../Banner\";import{TextField}from'@material-ui/core';import'./style.scss';import{Button}from\"@material-ui/core\";import{useButtonStyles,useTextFieldStyles}from\"../../RootStyles\";import{REGISTER_USER_ENDPOINT}from\"../../endpoints\";import{axiosApiCall}from\"../../utility\";import Alerts from\"../Styleguide/Alerts\";import{useHistory}from\"react-router-dom\";import jwt_decode from\"jwt-decode\";import{store}from\"../../redux\";export default function Register(){var buttonclasses=useButtonStyles();var textFieldClasses=useTextFieldStyles();var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),uname=_useState2[0],setUname=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),email=_useState4[0],setEmail=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),password=_useState6[0],setPassword=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),text=_useState8[0],setText=_useState8[1];var _useState9=useState(\"\"),_useState10=_slicedToArray(_useState9,2),severity=_useState10[0],setSeverity=_useState10[1];var history=useHistory();function registerUser(){return _registerUser.apply(this,arguments);}function _registerUser(){_registerUser=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var patternMatched,response,token,decoded;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:patternMatched=/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\\.[a-zA-Z0-9-]+)*$/.test(email);if(patternMatched){_context.next=5;break;}setSeverity(\"error\");setText(\"Invalid Email Address\");return _context.abrupt(\"return\",false);case 5:if(!(!password&&password.length>7)){_context.next=9;break;}setSeverity(\"error\");setText(\"Password should be atleast 8 digits\");return _context.abrupt(\"return\",false);case 9:_context.prev=9;_context.next=12;return axiosApiCall(REGISTER_USER_ENDPOINT,{uname:uname,email:email,password:password});case 12:response=_context.sent;console.log(\"ressss\",response);setSeverity(response.status);setText(response.message);if(response.status===\"success\"){window.localStorage.setItem(\"token\",response.token);token=window.localStorage.getItem(\"token\");decoded=jwt_decode(token);store.dispatch({type:'getUser',user:{email:decoded.email,uname:decoded.username}});history.push(\"/chat\");}_context.next=23;break;case 19:_context.prev=19;_context.t0=_context[\"catch\"](9);setSeverity(\"error\");setText(\"Unexpected Error occured\");case 23:case\"end\":return _context.stop();}}},_callee,null,[[9,19]]);}));return _registerUser.apply(this,arguments);}return/*#__PURE__*/_jsxs(\"div\",{className:\"register\",children:[/*#__PURE__*/_jsx(Banner,{}),/*#__PURE__*/_jsxs(\"div\",{className:\"register__form\",children:[/*#__PURE__*/_jsx(Alerts,{severity:severity,text:text}),/*#__PURE__*/_jsx(\"h2\",{children:\"Register\"}),/*#__PURE__*/_jsxs(\"form\",{className:textFieldClasses.root,noValidate:true,autoComplete:\"off\",children:[/*#__PURE__*/_jsx(TextField,{fullWidth:true,id:\"filled-basic\",placeholder:\"John123\",label:\"User Name\",value:uname,onChange:function onChange(e){return setUname(e.target.value);},variant:\"outlined\"}),/*#__PURE__*/_jsx(TextField,{fullWidth:true,id:\"filled-basic\",placeholder:\"you@awesome.com\",label:\"Your Email\",value:email,onChange:function onChange(e){return setEmail(e.target.value);},variant:\"outlined\"}),/*#__PURE__*/_jsx(TextField,{fullWidth:true,id:\"filled-basic\",placeholder:\"p@$$w0rd\",label:\"Your Password\",variant:\"outlined\",value:password,onChange:function onChange(e){return setPassword(e.target.value);}}),/*#__PURE__*/_jsx(Button,{fullWidth:true,className:buttonclasses.secondary,onClick:registerUser,color:\"default\",children:\"Register\"})]})]})]});}","map":{"version":3,"sources":["/Users/saikrishnareddymudhiganti/Desktop/MyProjects/projects/bellybird/bellybirdsclient/src/components/Register/index.tsx"],"names":["React","useState","Banner","TextField","Button","useButtonStyles","useTextFieldStyles","REGISTER_USER_ENDPOINT","axiosApiCall","Alerts","useHistory","jwt_decode","store","Register","buttonclasses","textFieldClasses","uname","setUname","email","setEmail","password","setPassword","text","setText","severity","setSeverity","history","registerUser","patternMatched","test","length","response","console","log","status","message","window","localStorage","setItem","token","getItem","decoded","dispatch","type","user","username","push","root","e","target","value","secondary"],"mappings":"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","sourcesContent":["import React, {useState} from \"react\";\nimport Banner from \"../Banner\";\nimport { TextField } from '@material-ui/core';\nimport './style.scss';\nimport { Button } from \"@material-ui/core\";\nimport { useButtonStyles, useTextFieldStyles } from \"../../RootStyles\";\nimport {REGISTER_USER_ENDPOINT} from \"../../endpoints\";\nimport { axiosApiCall } from \"../../utility\";\nimport Alerts from \"../Styleguide/Alerts\";\nimport { useHistory } from \"react-router-dom\";\nimport jwt_decode from \"jwt-decode\";\nimport {store} from \"../../redux\";\n\n\n\nexport default function Register() {\n    const buttonclasses = useButtonStyles();\n    const textFieldClasses = useTextFieldStyles();\n\n    const [uname, setUname] = useState(\"\");\n    const [email, setEmail] = useState(\"\");\n    const [password, setPassword] = useState(\"\");\n    const [text, setText] = useState(\"\");\n    const [severity, setSeverity] = useState(\"\");\n\n    const history = useHistory();\n\n    async function registerUser() {\n\n        const patternMatched = /^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\\.[a-zA-Z0-9-]+)*$/.test(email);\n        if (!patternMatched) {\n           setSeverity(\"error\");\n           setText(\"Invalid Email Address\"); \n           return false;\n           }\n         if(!password && password.length > 7) {\n            setSeverity(\"error\");\n            setText(\"Password should be atleast 8 digits\"); \n            return false;\n         }  \n\n        try {\n            const response = await axiosApiCall(REGISTER_USER_ENDPOINT, {uname, email, password});\n            console.log(\"ressss\", response);\n            setSeverity(response.status);\n            setText(response.message);\n            if (response.status === \"success\") {\n                window.localStorage.setItem(\"token\", response.token);\n                const token: any = window.localStorage.getItem(\"token\");\n                const decoded: any = jwt_decode(token)\n                store.dispatch({type: 'getUser', user: { email: decoded.email, uname: decoded.username}})\n                history.push(\"/chat\");\n            }\n        } catch(e) {\n            setSeverity(\"error\");\n            setText(\"Unexpected Error occured\");\n        }\n    }\n\n\n  return (\n      <div className=\"register\">\n        <Banner></Banner>\n        <div className=\"register__form\">\n        <Alerts severity= {severity} text={text}></Alerts>\n        <h2>Register</h2>\n        <form className={textFieldClasses.root} noValidate autoComplete=\"off\">\n           <TextField fullWidth id=\"filled-basic\" placeholder=\"John123\" label=\"User Name\" value={uname} onChange={(e) => setUname(e.target.value)} variant=\"outlined\" />\n           <TextField fullWidth id=\"filled-basic\" placeholder=\"you@awesome.com\" label=\"Your Email\" value={email} onChange={(e) => setEmail(e.target.value)} variant=\"outlined\" />\n           <TextField fullWidth id=\"filled-basic\" placeholder=\"p@$$w0rd\" label=\"Your Password\" variant=\"outlined\" value={password} onChange={(e) => setPassword(e.target.value)}/>\n           <Button fullWidth className={buttonclasses.secondary} onClick={registerUser} color=\"default\" >Register</Button>\n       </form>\n    </div>\n     </div>\n  )\n}"]},"metadata":{},"sourceType":"module"}