{"version":3,"sources":["redux.ts","components/Header/index.tsx","components/Nav/index.tsx","components/Banner/index.tsx","components/Styleguide/Main/index.tsx","components/Home/index.tsx","RootStyles.ts","utility.ts","endpoints.ts","components/Styleguide/Alerts.tsx","components/Login/index.tsx","components/Register/index.tsx","components/Chat/index.tsx","components/index.tsx","index.tsx"],"names":["token","localStorage","getItem","decoded","email","undefined","username","length","jwt_decode","intitalState","user","uname","store","createStore","state","action","newState","type","Header","history","useHistory","className","onClick","push","Nav","isUserAvailable","getState","fontSize","Banner","Main","props","class","children","Home","Link","component","useButtonStyles","makeStyles","secondary","background","border","borderRadius","boxShadow","color","height","padding","primary","useTextFieldStyles","theme","root","margin","spacing","width","API_URL","window","location","hostname","origin","axiosApiCall","path","payload","a","console","log","config","headers","axios","post","JSON","stringify","res","data","REGISTER_USER_ENDPOINT","LOGIN_USER_ENDPOINT","useStyles","createStyles","marginLeft","Alerts","severity","text","classes","Alert","variant","Login","buttonclasses","textFieldClasses","useState","setEmail","password","setPassword","setText","setSeverity","response","status","message","setItem","dispatch","noValidate","autoComplete","TextField","id","placeholder","label","value","onChange","e","target","Button","fullWidth","Register","setUname","test","HOST","Chat","chatMessage","setChatMessage","chatMessages","setChatMessages","wsRef","setWsRef","count","sendMessage","readyState","WebSocket","OPEN","send","intent","useEffect","ws","addEventListener","once","replace","event","parse","processMessage","oldMessages","reverse","close","map","index","onKeyDown","key","App","exact","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"sWAIMA,EAAaC,aAAaC,QAAQ,SACpCC,EAAU,CACVC,WAAOC,EACPC,cAAUD,GAEXL,GAASA,EAAMO,OAAS,KACtBJ,EAAUK,YAAWR,IAK1B,IAAMS,EAAe,CACjBC,KAAM,CACFN,MAAOD,EAAQC,MAAQD,EAAQC,MAAQ,GACvCO,MAAOR,EAAQG,SAAWH,EAAQG,SAAW,KAaxCM,EAAQC,aARA,WAA6C,IAA5CC,EAA2C,uDAA9BL,EAAcM,EAAgB,uCACtDC,EAAeF,EAIrB,MAHmB,YAAhBC,EAAOE,OACND,EAASN,KAAOK,EAAOL,MAEpBM,K,MCzBG,SAASE,IACtB,IAAMC,EAAUC,cAMhB,OACE,wBAAQC,UAAU,eAAlB,SACE,qBAAKA,UAAU,qBAAqBC,QANxC,WACEH,EAAQI,KAAK,U,qECaF,SAASC,IAEtB,IAAML,EAAUC,cAEVK,IADab,EAAMc,WACKhB,KAAKN,MAyBnC,OACC,sBAAKiB,UAAU,MAAf,UACE,qBAAKA,UAAU,YAAf,SACA,cAAC,IAAD,CAAUM,SAAS,QAAQL,QAb9B,WACEG,EAAkBN,EAAQI,KAAK,KAAOJ,EAAQI,KAAK,eAclD,qBAAKF,UAAU,YAAf,SACA,cAAC,IAAD,CAAUM,SAAS,QAAQL,QApB9B,WACEG,EAAkBN,EAAQI,KAAK,SAAWJ,EAAQI,KAAK,eAqBtD,qBAAKF,UAAU,cAAf,SACA,cAAC,IAAD,CAAmBM,SAAS,eCpDlB,SAASC,IAEpB,OACI,sBAAKP,UAAU,SAAf,UACI,cAACH,EAAD,IACA,cAACM,EAAD,O,OCRG,SAASK,EAAKC,GAE3B,OACI,sBAAMT,UAAWS,EAAMC,MAAvB,SACKD,EAAME,WCEF,SAASC,IACtB,IAAMd,EAAUC,cAGVK,IADab,EAAMc,WACKhB,KAAKN,MAMnC,OACE,sBAAKiB,UAAU,OAAf,UACE,cAACO,EAAD,IACA,cAACC,EAAD,UACE,sBAAKR,UAAU,mBAAf,UACE,2DACA,cAACa,EAAA,EAAD,CAAMC,UAAU,SAASb,QAVjC,WACEG,EAAkBN,EAAQI,KAAK,SAAWJ,EAAQI,KAAK,WASjD,uC,yECxBGa,EAAkBC,YAAW,CACtCC,UAAW,CACTC,WAAY,mDACZC,OAAQ,EACRC,aAAc,EACdC,UAAW,wCACXC,MAAO,QACPC,OAAQ,GACRC,QAAS,UAEXC,QAAS,CACPP,WAAY,mDACZC,OAAQ,EACRC,aAAc,EACdC,UAAW,wCACXC,MAAO,QACPC,OAAQ,GACRC,QAAS,YAKFE,EAAqBV,aAAW,SAACW,GAAD,MAAY,CACvDC,KAAM,CACJ,QAAS,CACPC,OAAQF,EAAMG,QAAQ,GACtBC,MAAO,a,iBCvBPC,IAHqD,cAA7BC,OAAOC,SAASC,UAGjB,UAAMF,OAAOC,SAASE,OAAtB,SAAsC,wBAkB5D,SAAeC,EAAtB,oC,4CAAO,WAA4BC,EAAcC,GAA1C,iBAAAC,EAAA,6DACHC,QAAQC,IAAI,oBACNC,EAAS,CACXC,QAAS,CACP,eAAgB,mBAChB,iBAAkBhE,aAAaC,QAAQ,UAAY,KALtD,SAQ8BgE,IAAMC,KAAN,UAAcd,GAAd,OAAwBM,GAAQS,KAAKC,UAAUT,GAAUI,GARvF,cAQGM,EARH,OASHR,QAAQC,IAAI,4BAA6BO,EAAIC,MAT1C,kBAUID,EAAIC,MAVR,4C,sBCtBA,IAAMC,EAAyB,gBACzBC,EAAsB,a,kBCG7BC,EAAYrC,aAAW,SAACW,GAAD,OAC3B2B,YAAa,CACX1B,KAAM,CACJG,MAAO,MACPwB,WAAY,YAUH,SAASC,EAAT,GAAqD,IAAnCC,EAAkC,EAAlCA,SAAUC,EAAwB,EAAxBA,KACnCC,EAAUN,IAEX,OAAOI,GACJ,IAAK,QACD,OAAO,qBAAKzD,UAAW2D,EAAQ/B,KAAxB,SAA8B,cAACgC,EAAA,EAAD,CAAOC,QAAQ,WAAWJ,SAAS,QAAnC,SAA4CC,MACrF,IAAK,UACD,OAAO,qBAAK1D,UAAW2D,EAAQ/B,KAAxB,SAA8B,cAACgC,EAAA,EAAD,CAAOC,QAAQ,WAAWJ,SAAS,UAAnC,SAA8CC,MACvF,IAAK,OACD,OAAO,qBAAK1D,UAAW2D,EAAQ/B,KAAxB,SAA8B,cAACgC,EAAA,EAAD,CAAOC,QAAQ,WAAWJ,SAAS,OAAnC,SAA2CC,MACpF,IAAK,UACD,OAAO,qBAAK1D,UAAW2D,EAAQ/B,KAAxB,SAA8B,cAACgC,EAAA,EAAD,CAAOC,QAAQ,WAAWJ,SAAS,UAAnC,SAA8CC,MACvF,QACE,MAAO,ICjBJ,SAASI,IACpB,IAAMC,EAAgBhD,IAChBiD,EAAmBtC,IAFG,EAIFuC,mBAAS,IAJP,mBAIrBlF,EAJqB,KAIdmF,EAJc,OAKID,mBAAS,IALb,mBAKrBE,EALqB,KAKXC,EALW,OAMJH,mBAAS,IANL,mBAMrBP,EANqB,KAMfW,EANe,OAOIJ,mBAAS,IAPb,mBAOrBR,EAPqB,KAOXa,EAPW,KAQtBxE,EAAUC,cARY,4CAU5B,gCAAAyC,EAAA,+EAEoCH,EAAae,EAAqB,CAAErE,QAAOoF,aAF/E,OAEcI,EAFd,OAGQD,EAAYC,EAASC,QACrBH,EAAQE,EAASE,SAEjBxC,OAAOrD,aAAa8F,QAAQ,QAASH,EAAS5F,OACtB,YAApB4F,EAASC,SACT1E,EAAQI,KAAK,SACPvB,EAAaC,aAAaC,QAAQ,SAClCC,EAAeK,YAAWR,GAChCY,EAAMoF,SAAS,CAAC/E,KAAM,UAAWP,KAAM,CAAEN,MAAOD,EAAQC,MAAOO,MAAOR,EAAQG,aAX1F,kDAcQqF,EAAY,SACZD,EAAQ,4BAfhB,2DAV4B,sBA6B5B,OACI,sBAAKrE,UAAU,QAAf,UACI,cAACO,EAAD,IACA,sBAAKP,UAAU,cAAf,UACI,cAACwD,EAAD,CAAQC,SAAUA,EAAUC,KAAMA,IAClC,uCACA,uBAAM1D,UAAWgE,EAAiBpC,KAAMgD,YAAU,EAACC,aAAa,MAAhE,UACI,cAACC,EAAA,EAAD,CAAWC,GAAG,eAAeC,YAAY,kBAAkBC,MAAM,aAAaC,MAAOnG,EAAOoG,SAAU,SAACC,GAAD,OAAOlB,EAASkB,EAAEC,OAAOH,QAAQrB,QAAQ,aAC/I,cAACiB,EAAA,EAAD,CAAWC,GAAG,eAAeC,YAAY,WAAWC,MAAM,gBAAgBC,MAAOf,EAAUgB,SAAU,SAACC,GAAD,OAAOhB,EAAYgB,EAAEC,OAAOH,QAAQrB,QAAQ,aACjJ,cAACyB,EAAA,EAAD,CAAQC,WAAS,EAACvF,UAAW+D,EAAc9C,UAAWhB,QAtC1C,2CAsC8DqB,MAAM,UAAhF,4B,OCrCL,SAASkE,IACpB,IAAMzB,EAAgBhD,IAChBiD,EAAmBtC,IAFM,EAILuC,mBAAS,IAJJ,mBAIxB3E,EAJwB,KAIjBmG,EAJiB,OAKLxB,mBAAS,IALJ,mBAKxBlF,EALwB,KAKjBmF,EALiB,OAMCD,mBAAS,IANV,mBAMxBE,EANwB,KAMdC,EANc,OAOPH,mBAAS,IAPF,mBAOxBP,EAPwB,KAOlBW,EAPkB,OAQCJ,mBAAS,IARV,mBAQxBR,EARwB,KAQda,EARc,KAUzBxE,EAAUC,cAVe,4CAY/B,gCAAAyC,EAAA,yDAE2B,uEAAuEkD,KAAK3G,GAFvG,uBAIOuF,EAAY,SACZD,EAAQ,yBALf,mBAMc,GANd,UAQSF,KAAYA,EAASjF,OAAS,GARvC,uBASQoF,EAAY,SACZD,EAAQ,uCAVhB,mBAWe,GAXf,iCAe+BhC,EAAac,EAAwB,CAAC7D,QAAOP,QAAOoF,aAfnF,QAecI,EAfd,OAgBQ9B,QAAQC,IAAI,SAAU6B,GACtBD,EAAYC,EAASC,QACrBH,EAAQE,EAASE,SACO,YAApBF,EAASC,SACTvC,OAAOrD,aAAa8F,QAAQ,QAASH,EAAS5F,OACxCA,EAAasD,OAAOrD,aAAaC,QAAQ,SACzCC,EAAeK,YAAWR,GAChCY,EAAMoF,SAAS,CAAC/E,KAAM,UAAWP,KAAM,CAAEN,MAAOD,EAAQC,MAAOO,MAAOR,EAAQG,YAC9Ea,EAAQI,KAAK,UAxBzB,kDA2BQoE,EAAY,SACZD,EAAQ,4BA5BhB,2DAZ+B,sBA6CjC,OACI,sBAAKrE,UAAU,WAAf,UACE,cAACO,EAAD,IACA,sBAAKP,UAAU,iBAAf,UACA,cAACwD,EAAD,CAAQC,SAAWA,EAAUC,KAAMA,IACnC,0CACA,uBAAM1D,UAAWgE,EAAiBpC,KAAMgD,YAAU,EAACC,aAAa,MAAhE,UACG,cAACC,EAAA,EAAD,CAAWS,WAAS,EAACR,GAAG,eAAeC,YAAY,UAAUC,MAAM,YAAYC,MAAO5F,EAAO6F,SAAU,SAACC,GAAD,OAAOK,EAASL,EAAEC,OAAOH,QAAQrB,QAAQ,aAChJ,cAACiB,EAAA,EAAD,CAAWS,WAAS,EAACR,GAAG,eAAeC,YAAY,kBAAkBC,MAAM,aAAaC,MAAOnG,EAAOoG,SAAU,SAACC,GAAD,OAAOlB,EAASkB,EAAEC,OAAOH,QAAQrB,QAAQ,aACzJ,cAACiB,EAAA,EAAD,CAAWS,WAAS,EAACR,GAAG,eAAeC,YAAY,WAAWC,MAAM,gBAAgBpB,QAAQ,WAAWqB,MAAOf,EAAUgB,SAAU,SAACC,GAAD,OAAOhB,EAAYgB,EAAEC,OAAOH,UAC9J,cAACI,EAAA,EAAD,CAAQC,WAAS,EAACvF,UAAW+D,EAAc9C,UAAWhB,QAvD9B,2CAuDqDqB,MAAM,UAAnF,+B,YCpDLqE,G,OAAO1D,OAAOC,SAASC,SAAW,SAEzB,SAASyD,IAAQ,IAAD,EAES3B,mBAAiB,IAF1B,mBAEtB4B,EAFsB,KAETC,EAFS,OAGW7B,mBAAyB,IAHpC,mBAGtB8B,EAHsB,KAGRC,EAHQ,OAIH/B,mBAA2B,MAJxB,mBAItBgC,EAJsB,KAIfC,EAJe,KAMvBnC,EAAgBhD,IAEhBjB,EAAUC,cAEVN,EAAaF,EAAMc,WAGrB8F,EAAQ,GA0BZ,SAASC,KACE,OAALH,QAAK,IAALA,OAAA,EAAAA,EAAOI,cAAeC,UAAUC,OAIpCN,EAAMO,KAAKzD,KAAKC,UAAU,CAAEyB,QAASoB,EAAaY,OAAQ,OAAQnH,MAAOG,EAAMJ,KAAKC,SACpFwG,EAAe,KAoCjB,OAjCAY,qBAAU,WACR,IAAMC,EAAK,IAAIL,UAAJ,eAAsBX,EAAtB,YAA8B/G,aAAaC,QAAQ,WA0B9D,OAxBA8H,EAAGC,iBAAiB,QAAQ,WAC1BD,EAAGH,KAAKzD,KAAKC,UAAU,CAAEyD,OAAQ,eAAgBN,MAAO,SACvD,CAAEU,MAAM,IAEXF,EAAGC,iBAAiB,SAAS,WAC3B9G,EAAQgH,QAAQ,aAGlBH,EAAGC,iBAAiB,WAAW,SAACG,GAC9B,IACMtC,EAvCV,SAAwBlC,GACtB,IACE,OAAOQ,KAAKiE,MAAMzE,GAClB,MAAO6C,GACP,OAAO,MAmCc6B,CADRF,EAAM7D,MAEduB,IACLhC,QAAQC,IAAI,UAAW+B,GACA,SAAnBA,EAAQgC,OACVT,GAAgB,SAAAkB,GAAW,4BAAQA,GAAR,CAAqBzC,OACpB,iBAAnBA,EAAQgC,SACjBhE,QAAQC,IAAI,eAAgB+B,EAAQvB,MACpC8C,EAAgBvB,EAAQvB,KAAKiE,gBAKjCjB,EAASS,GAEF,WACLA,EAAGS,WAGJ,CAACtH,IAGF,sBAAKE,UAAU,OAAf,UACE,cAACO,EAAD,IACA,2CACA,sBAAKP,UAAU,gBAAf,UACE,sBAAKA,UAAU,iBAAf,UACE,cAACa,EAAA,EAAD,CAAMC,UAAU,SAASb,QAzDjC,YACW,OAALgG,QAAK,IAALA,OAAA,EAAAA,EAAOI,cAAeC,UAAUC,OAIpCJ,GAAgB,GAChBF,EAAMO,KAAKzD,KAAKC,UAAU,CAAEyD,OAAQ,eAAgBN,MAAOA,OAmDrD,uBAGEJ,EAAasB,KAAI,SAAC5C,EAAS6C,GACzB,OAAI7C,EAAQnF,QAAUG,EAAMJ,KAAKC,MACvB,qBAAKU,UAAU,8BAAf,SACN,sBAAKA,UAAU,wCAAf,UACE,sBAAKA,UAAU,SAAf,UAAyByE,EAAQnF,MAAjC,OACA,qBAAKU,UAAU,UAAf,SAA0ByE,EAAQA,cAHoB6C,GAOlD,qBAAKtH,UAAU,uBAAf,SACN,sBAAKA,UAAU,gCAAf,UACE,sBAAKA,UAAU,SAAf,UAAyByE,EAAQnF,MAAjC,OACA,qBAAKU,UAAU,UAAf,SAA0ByE,EAAQA,cAHa6C,SAW3D,sBAAKtH,UAAU,YAAf,UAEE,cAAC8E,EAAA,EAAD,CAAWS,WAAS,EAACgC,UAjGP,SAACR,GACH,UAAdA,EAAMS,KACRpB,KA+FmDpB,YAAY,oBAAoBC,MAAM,oBAAoBE,SAAU,SAACC,GAAD,OAAYU,EAAeV,EAAEC,OAAOH,QAAQA,MAAOW,EAAahC,QAAQ,aAC3L,uBACA,cAACyB,EAAA,EAAD,CAAQC,WAAS,EAACvF,UAAW+D,EAAc9C,UAAWhB,QAASmG,EAAa9E,MAAM,UAAlF,mCC9GKmG,MAbf,WACE,OACG,cAAC,IAAD,UACG,eAAC,IAAD,WACE,cAAC,IAAD,CAAOnF,KAAK,IAAIxB,UAAWF,EAAM8G,OAAK,IACtC,cAAC,IAAD,CAAOpF,KAAK,SAASxB,UAAWgD,EAAO4D,OAAK,IAC5C,cAAC,IAAD,CAAOpF,KAAK,YAAYxB,UAAW0E,EAAUkC,OAAK,IAClD,cAAC,IAAD,CAAOpF,KAAK,QAAQxB,UAAW8E,EAAM8B,OAAK,UCbpDC,IAASC,OACP,cAAC,IAAMC,WAAP,UACE,cAAC,EAAD,MAEFC,SAASC,eAAe,U","file":"static/js/main.4f52c45c.chunk.js","sourcesContent":["\nimport {createStore} from \"redux\";\nimport jwt_decode from \"jwt-decode\";\n\nconst token: any = localStorage.getItem(\"token\");\nlet decoded = {\n    email: undefined,\n    username: undefined\n}\nif(token && token.length > 20) {\n     decoded = jwt_decode(token);\n}\n\n\n\nconst intitalState = {\n    user: {\n        email: decoded.email ? decoded.email : \"\",\n        uname: decoded.username ? decoded.username : \"\"\n    }\n}\n\n\nconst reducer: any = (state: any = intitalState, action: any) => {\n     const newState:any = state;\n     if(action.type === \"getUser\") {\n         newState.user = action.user\n     }\n     return newState;\n}\n\nexport const store = createStore(reducer);\n\n","import './style.scss';\nimport { useHistory } from \"react-router-dom\"\n\nexport default function Header() {\n  const history = useHistory();\n\n  function redirectToHome() {\n    history.push(\"/\");\n  }\n\n  return (\n    <header className=\"home__header\">\n      <div className=\"home__header__logo\" onClick={redirectToHome}></div>\n    </header>\n  )\n}","import './style.scss';\nimport HomeIcon from '@material-ui/icons/Home';\nimport AccountCircleIcon from '@material-ui/icons/AccountCircle';\nimport ChatIcon from '@material-ui/icons/Chat';\nimport { store } from \"../../redux\";\n// import { makeStyles, createStyles, Theme } from '@material-ui/core/styles';\n// import Link  from '@material-ui/core/Link';\n// import Typography from '@material-ui/core/Typography';\nimport { useHistory } from \"react-router-dom\";\n\n// const useStyles = makeStyles((theme: Theme) =>\n//   createStyles({\n//     root: {\n//       '& > * + *': {\n//         marginLeft: theme.spacing(2),\n//         color: '#000'\n//       },\n//     },\n//   }),\n// );\nexport default function Nav() {\n\n  const history = useHistory();\n  const state: any = store.getState();\n  const isUserAvailable = state.user.email ? true : false;\n  // const classes = useStyles();\n\n  // function redirectToLogin() {\n  //   history.push(\"/login\");\n  // }\n\n  // function redirectToRegister() {\n  //   history.push(\"/register\");\n  // }\n\n  function redirectUserToChat() {\n    isUserAvailable ? history.push(\"/chat\") : history.push(\"/login\");\n  }\n\n  function redirectUserToHome() {\n    isUserAvailable ? history.push(\"/\") : history.push(\"/login\");\n  }\n\n  // function logoutUser() {\n  //   window.localStorage.removeItem(\"token\");\n  //   store.dispatch({ type: 'getUser', user: { email: \"\", uname: \"\" } });\n  //   history.push(\"/\");\n  // }\n\n  return (\n   <nav className=\"nav\">\n     <div className=\"nav--home\">\n     <HomeIcon fontSize=\"large\" onClick={redirectUserToHome}></HomeIcon>\n     </div>\n     <div className=\"nav--chat\">\n     <ChatIcon fontSize=\"large\" onClick={redirectUserToChat}></ChatIcon>\n     </div>\n     <div className=\"nav-account\">\n     <AccountCircleIcon fontSize=\"large\"></AccountCircleIcon>\n     </div>\n     \n      {/* {\n        isUserAvailable ? (\n\n          <div className=\"home__header__nav\">\n           <Typography className={classes.root}>\n             <Link href=\"#\" component=\"button\" onClick={logoutUser}>Logout</Link>\n             <Link href=\"#\" component=\"button\" onClick={redirectUser} color=\"inherit\">Hi {state.user.uname}</Link>\n          </Typography>\n          </div>) : \n          (<div className=\"home__header__nav\">\n           <Typography className={classes.root}>\n             <Link href=\"#\" component=\"button\"  onClick={redirectToLogin}  >Login</Link>\n             <Link href=\"#\" component=\"button\"  onClick={redirectToRegister} >Register</Link>\n          </Typography>\n          </div>)\n\n      } */}\n   </nav>\n  )\n}","import React from \"react\";\nimport Header from \"../Header\";\nimport './style.scss';\nimport Nav from \"../Nav\";\n\n\nexport default function Banner() {\n\n    return (\n        <div className=\"banner\">\n            <Header></Header>\n            <Nav></Nav>\n        </div>\n    )\n}","import './style.scss';\n\n\nexport default function Main(props: any) {\n\n  return (\n      <main className={props.class}>\n          {props.children}\n     </main>\n  )\n}","import React from \"react\";\nimport './style.scss';\nimport Link from '@material-ui/core/Link';\nimport { useHistory } from \"react-router-dom\";\nimport { store } from \"../../redux\";\nimport Banner from \"../Banner\";\nimport Main from \"../Styleguide/Main\";\n\n\nexport default function Home() {\n  const history = useHistory();\n\n  const state: any = store.getState();\n  const isUserAvailable = state.user.email ? true : false\n\n  function redirectUserToChat() {\n    isUserAvailable ? history.push(\"/chat\") : history.push(\"/login\");\n  }\n\n  return (\n    <div className=\"home\">\n      <Banner></Banner>\n      <Main>\n        <div className=\"home__navigation\">\n          <h6>Home Page, Coming soon...</h6>\n          <Link component=\"button\" onClick={redirectUserToChat}>Link to Live Chat</Link>\n        </div>\n      </Main>\n    </div>\n  )\n}","import { makeStyles } from '@material-ui/core/styles';\nexport const useButtonStyles = makeStyles({\n    secondary: {\n      background: 'linear-gradient(45deg, #9ca20e 30%, #dacb1c 90%)',\n      border: 0,\n      borderRadius: 3,\n      boxShadow: '0 3px 5px 2px rgba(255, 105, 135, .3)',\n      color: 'black',\n      height: 48,\n      padding: '0 30px',\n    },\n    primary: {\n      background: 'linear-gradient(45deg, #101010 30%, #171514 90%)',\n      border: 0,\n      borderRadius: 3,\n      boxShadow: '0 3px 5px 2px rgba(255, 105, 135, .3)',\n      color: 'white',\n      height: 48,\n      padding: '0 30px',\n    }\n  });\n\n\nexport const useTextFieldStyles = makeStyles((theme) => ({\n  root: {\n    '& > *': {\n      margin: theme.spacing(1),\n      width: '25ch',\n    },\n  },\n}));","import axios, { AxiosResponse } from \"axios\"\nexport const IS_DEVELOPMENT = window.location.hostname === \"localhost\";\nexport const IS_PRODUCTION = !IS_DEVELOPMENT;\n\nconst API_URL = IS_PRODUCTION ? `${window.location.origin}:1337` : \"http://localhost:1337\";\n\nexport async function apiCall(path: string, payload: {[key: string]:any})  {\n    console.log(\"api call request\");\n    const res = await fetch(`${API_URL}${path}`, {\n        method: \"POST\",\n        headers: {\n            \"Content-Type\": \"application/json\",\n            \"x-access-token\": window.localStorage.getItem(\"token\") || \"\",\n            \"Access-Control-Allow-Origin\": \"true\",\n            \"Access-Control-Allow-Credentials\": \"true\"\n        },\n        body: JSON.stringify(payload)\n    }).then(t => t.json())\n    console.log(\"api call request response\", res);\n    return res;\n}\n\nexport async function axiosApiCall(path: string, payload: {[key: string]:any})  {\n    console.log(\"api call request\");\n    const config = {\n        headers: {\n          \"Content-Type\": \"application/json\",\n          \"x-access-token\": localStorage.getItem(\"token\") || \"\"\n        }\n      }\n    const res: AxiosResponse = await axios.post(`${API_URL}${path}`, JSON.stringify(payload), config);\n    console.log(\"api call request response\", res.data);\n    return res.data;\n}","export const REGISTER_USER_ENDPOINT = \"/api/register\";\nexport const LOGIN_USER_ENDPOINT = \"/api/login\";","import React from 'react';\nimport { makeStyles, Theme, createStyles } from '@material-ui/core/styles';\nimport Alert from '@material-ui/lab/Alert';\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    root: {\n      width: '80%',\n      marginLeft: '8px'\n    },\n  }),\n);\n\ninterface AlertType {\n  severity: string;\n  text: string;\n}\n\nexport default function Alerts({ severity, text}: AlertType ): any {\n  const classes = useStyles();\n\n       switch(severity) {\n          case \"error\":\n              return <div className={classes.root}><Alert variant=\"outlined\" severity=\"error\">{text}</Alert></div>\n          case \"warning\": \n              return <div className={classes.root}><Alert variant=\"outlined\" severity=\"warning\">{text}</Alert></div>\n          case \"info\":\n              return <div className={classes.root}><Alert variant=\"outlined\" severity=\"info\">{text}</Alert></div>\n          case \"success\":\n              return <div className={classes.root}><Alert variant=\"outlined\" severity=\"success\">{text}</Alert></div>\n          default:\n            return \"\";    \n       }\n\n}","import React, { useState } from \"react\";\nimport Banner from \"../Banner\";\nimport './style.scss';\nimport { TextField } from '@material-ui/core';\nimport { useHistory } from \"react-router-dom\";\nimport { Button } from \"@material-ui/core\";\nimport { useButtonStyles, useTextFieldStyles } from \"../../RootStyles\";\nimport { axiosApiCall } from \"../../utility\";\nimport { LOGIN_USER_ENDPOINT } from \"../../endpoints\";\nimport Alerts from \"../Styleguide/Alerts\";\nimport jwt_decode from \"jwt-decode\";\nimport {store} from \"../../redux\";\n\n\nexport default function Login() {\n    const buttonclasses = useButtonStyles();\n    const textFieldClasses = useTextFieldStyles();\n\n    const [email, setEmail] = useState(\"\");\n    const [password, setPassword] = useState(\"\");\n    const [text, setText] = useState(\"\");\n    const [severity, setSeverity] = useState(\"\");\n    const history = useHistory();\n\n    async function loginUser(): Promise<void> {\n        try {\n            const response: any = await axiosApiCall(LOGIN_USER_ENDPOINT, { email, password });\n            setSeverity(response.status);\n            setText(response.message)\n            //TODO: bad practice --> refresh tokens\n            window.localStorage.setItem(\"token\", response.token);\n            if (response.status === \"success\") {\n                history.push(\"/chat\");\n                const token: any = localStorage.getItem(\"token\");\n                const decoded: any = jwt_decode(token)\n                store.dispatch({type: 'getUser', user: { email: decoded.email, uname: decoded.username}});\n            }\n        } catch (e) {\n            setSeverity(\"error\");\n            setText(\"Unexpected Error occured\");\n        }\n    }\n\n    return (\n        <div className=\"login\">\n            <Banner></Banner>\n            <div className=\"login__form\">\n                <Alerts severity={severity} text={text}></Alerts>\n                <h2>Login</h2>\n                <form className={textFieldClasses.root} noValidate autoComplete=\"off\">\n                    <TextField id=\"filled-basic\" placeholder=\"you@awesome.com\" label=\"Your Email\" value={email} onChange={(e) => setEmail(e.target.value)} variant=\"outlined\" />\n                    <TextField id=\"filled-basic\" placeholder=\"p@$$w0rd\" label=\"Your Password\" value={password} onChange={(e) => setPassword(e.target.value)} variant=\"outlined\" />\n                    <Button fullWidth className={buttonclasses.secondary} onClick={loginUser} color=\"default\" >Login</Button>\n                </form>\n            </div>\n        </div>\n    )\n}","import React, {useState} from \"react\";\nimport Banner from \"../Banner\";\nimport { TextField } from '@material-ui/core';\nimport './style.scss';\nimport { Button } from \"@material-ui/core\";\nimport { useButtonStyles, useTextFieldStyles } from \"../../RootStyles\";\nimport {REGISTER_USER_ENDPOINT} from \"../../endpoints\";\nimport { axiosApiCall } from \"../../utility\";\nimport Alerts from \"../Styleguide/Alerts\";\nimport { useHistory } from \"react-router-dom\";\nimport jwt_decode from \"jwt-decode\";\nimport {store} from \"../../redux\";\n\n\n\nexport default function Register() {\n    const buttonclasses = useButtonStyles();\n    const textFieldClasses = useTextFieldStyles();\n\n    const [uname, setUname] = useState(\"\");\n    const [email, setEmail] = useState(\"\");\n    const [password, setPassword] = useState(\"\");\n    const [text, setText] = useState(\"\");\n    const [severity, setSeverity] = useState(\"\");\n\n    const history = useHistory();\n\n    async function registerUser() {\n\n        const patternMatched = /^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\\.[a-zA-Z0-9-]+)*$/.test(email);\n        if (!patternMatched) {\n           setSeverity(\"error\");\n           setText(\"Invalid Email Address\"); \n           return false;\n           }\n         if(!password && password.length > 7) {\n            setSeverity(\"error\");\n            setText(\"Password should be atleast 8 digits\"); \n            return false;\n         }  \n\n        try {\n            const response = await axiosApiCall(REGISTER_USER_ENDPOINT, {uname, email, password});\n            console.log(\"ressss\", response);\n            setSeverity(response.status);\n            setText(response.message);\n            if (response.status === \"success\") {\n                window.localStorage.setItem(\"token\", response.token);\n                const token: any = window.localStorage.getItem(\"token\");\n                const decoded: any = jwt_decode(token)\n                store.dispatch({type: 'getUser', user: { email: decoded.email, uname: decoded.username}})\n                history.push(\"/chat\");\n            }\n        } catch(e) {\n            setSeverity(\"error\");\n            setText(\"Unexpected Error occured\");\n        }\n    }\n\n\n  return (\n      <div className=\"register\">\n        <Banner></Banner>\n        <div className=\"register__form\">\n        <Alerts severity= {severity} text={text}></Alerts>\n        <h2>Register</h2>\n        <form className={textFieldClasses.root} noValidate autoComplete=\"off\">\n           <TextField fullWidth id=\"filled-basic\" placeholder=\"John123\" label=\"User Name\" value={uname} onChange={(e) => setUname(e.target.value)} variant=\"outlined\" />\n           <TextField fullWidth id=\"filled-basic\" placeholder=\"you@awesome.com\" label=\"Your Email\" value={email} onChange={(e) => setEmail(e.target.value)} variant=\"outlined\" />\n           <TextField fullWidth id=\"filled-basic\" placeholder=\"p@$$w0rd\" label=\"Your Password\" variant=\"outlined\" value={password} onChange={(e) => setPassword(e.target.value)}/>\n           <Button fullWidth className={buttonclasses.secondary} onClick={registerUser} color=\"default\" >Register</Button>\n       </form>\n    </div>\n     </div>\n  )\n}","import React, { useEffect, useState } from \"react\";\nimport { TextField, Button } from '@material-ui/core';\nimport { useButtonStyles } from \"../../RootStyles\"\nimport Banner from \"../Banner\";\nimport './style.scss';\nimport { useHistory } from \"react-router-dom\";\nimport { store } from \"../../redux\";\nimport Link from '@material-ui/core/Link';\n\n\ntype Message = {\n  email: string;\n  uname: string;\n  message: string;\n  intent: string;\n  //ToDO: date\n}\n\nconst HOST = window.location.hostname + ':1338';\n\nexport default function Chat() {\n\n  const [chatMessage, setChatMessage] = useState<string>(\"\");\n  const [chatMessages, setChatMessages] = useState<Array<Message>>([]);\n  const [wsRef, setWsRef] = useState<null | WebSocket>(null);\n\n  const buttonclasses = useButtonStyles();\n\n  const history = useHistory();\n\n  const state: any = store.getState();\n\n\n  let count = 10;\n\n  const handleKeyDown = (event: any) => {\n    if (event.key === 'Enter') {\n      sendMessage();\n    }\n  }\n\n\n  function processMessage(payload: string) {\n    try {\n      return JSON.parse(payload);\n    } catch (e) {\n      return null;\n    }\n  }\n\n  function showMore() {\n    if (wsRef?.readyState !== WebSocket.OPEN) {\n      // websocket not connected\n      return;\n    }\n    count = count + 10;\n    wsRef.send(JSON.stringify({ intent: 'old-messages', count: count }));\n  }\n\n  function sendMessage() {\n    if (wsRef?.readyState !== WebSocket.OPEN) {\n      // websocket not connected\n      return;\n    }\n    wsRef.send(JSON.stringify({ message: chatMessage, intent: \"chat\", uname: state.user.uname }))\n    setChatMessage(\"\");\n  }\n\n  useEffect(() => {\n    const ws = new WebSocket(`ws://${HOST}/${localStorage.getItem(\"token\")}`);\n\n    ws.addEventListener(\"open\", () => {\n      ws.send(JSON.stringify({ intent: 'old-messages', count: 100 }));\n    }, { once: true });\n\n    ws.addEventListener(\"error\", () => {\n      history.replace(\"/login\");\n    })\n\n    ws.addEventListener(\"message\", (event) => {\n      const data = event.data;\n      const message: any = processMessage(data);\n      if (!message) return\n      console.log(\"message\", message)\n      if (message.intent === \"chat\") {\n        setChatMessages(oldMessages => [...oldMessages, message as Message]);\n      } else if (message.intent === \"old-messages\") {\n        console.log(\"old-messages\", message.data);\n        setChatMessages(message.data.reverse());\n      }\n\n    })\n\n    setWsRef(ws);\n\n    return () => {\n      ws.close();\n    }\n\n  }, [history])\n\n  return (\n    <div className=\"chat\">\n      <Banner></Banner>\n      <h2>Live Chat</h2>\n      <div className=\"chat__wrapper\">\n        <div className=\"chat__messages\">\n          <Link component=\"button\" onClick={showMore}>Show More</Link>\n\n          {\n            chatMessages.map((message, index) => {\n              if (message.uname === state.user.uname) {\n                return (<div className=\"chat__messages__item active\" key={index}>\n                  <div className=\"chat__messages__item__wrapper--active\">\n                    <div className=\"author\">{message.uname}:</div>\n                    <div className=\"message\">{message.message}</div>\n                  </div>\n                </div>)\n              } else {\n                return (<div className=\"chat__messages__item\" key={index}>\n                  <div className=\"chat__messages__item__wrapper\">\n                    <div className=\"author\">{message.uname}:</div>\n                    <div className=\"message\">{message.message}</div>\n                  </div>\n                </div>)\n              }\n\n\n            })}\n        </div>\n        <div className=\"chat__box\">\n\n          <TextField fullWidth onKeyDown={handleKeyDown} placeholder=\"Your Message Here\" label=\"Type Your Message\" onChange={(e: any) => setChatMessage(e.target.value)} value={chatMessage} variant=\"outlined\" />\n          <br />\n          <Button fullWidth className={buttonclasses.secondary} onClick={sendMessage} color=\"default\" >Send Message</Button>\n        </div>\n      </div>\n    </div>\n  )\n}","import React from 'react';\nimport {\n    BrowserRouter as Router,\n    Switch,\n    Route\n  } from \"react-router-dom\";\nimport Home from \"./Home\";  \nimport Login from \"./Login\";\nimport Register from \"./Register\";\nimport Chat from \"./Chat\";\n\nfunction App() {\n  return (\n     <Router>\n        <Switch>\n          <Route path=\"/\" component={Home} exact/>\n          <Route path=\"/login\" component={Login} exact/>\n          <Route path=\"/register\" component={Register} exact/>\n          <Route path=\"/chat\" component={Chat} exact/>\n        </Switch>\n    </Router>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './components';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}